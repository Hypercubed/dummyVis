{"version":3,"sources":["../src/dummyVis.js"],"names":[],"mappings":"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","file":"./lib/dummyVis.js","sourcesContent":["// This module implements a dummy visualization that is intended\n// to show how to create a simple Chiasm plugin using D3.\n//\n// Draws from previous work found at\n// https://github.com/curran/phd/blob/gh-pages/prototype/src/dummyVis.js\n// https://github.com/curran/model-contrib/blob/gh-pages/modules/dummyVis.js\n//\n// Created by Curran Kelleher May 2015\n\nimport d3 from 'd3';\nimport Model from 'model';\n\nexport var __useDefault = true;\n\nexport default class DummyViz extends Model {\n\n  constructor(chiasm) {\n    super({\n      publicProperties: [\n        // The background color, a CSS color string.\n        \"color\",\n\n        // The string that gets displayed in the center of the box.\n        \"text\",\n\n        // The width in pixels of lines for the X.\n        \"lineWidth\",\n\n        // The relative size of this component, used by the layout plugin.\n        \"size\"\n      ],\n\n      color: \"white\",\n      text: \"\",\n      lineWidth: 8,\n      size: 1\n    });\n\n    if (!(this instanceof DummyViz)) {\n      return new DummyViz(chiasm);\n    }\n\n    var model = this;\n\n    // Append an SVG to the chiasm container.\n    // Use CSS `position: absolute;` so setting `left` and `top` CSS\n    // properties later will position the SVG relative to containing div.\n\n    // TODO refactor the Chiasm layout plugin such that it creates a DIV for each\n    // component and sets that as model.container.\n    var svg = d3.select(chiasm.container).append(\"svg\")\n      .style(\"position\", \"absolute\");\n\n    // Add a background rectangle to the SVG.\n    // The location of the rect will be fixed at (0, 0)\n    // with respect to the containing SVG.\n    var rect = svg.append(\"rect\")\n      .attr(\"x\", 0)\n      .attr(\"y\", 0);\n\n    // Add a text element to the SVG,\n    // which will render the `text` model property.\n    var text = svg.append(\"text\")\n      .attr(\"font-size\", \"7em\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"alignment-baseline\", \"middle\");\n\n    // Make the X lines draggable. This shows how to add\n    // interaction to visualization modules.\n    var lineDrag = (function () {\n      var x1, x2;\n      return d3.behavior.drag()\n      .on(\"dragstart\", function (d) {\n        x1 = d3.event.sourceEvent.pageX;\n      })\n      .on(\"drag\", function (d) {\n        var x2 = d3.event.sourceEvent.pageX,\n        newLineWidth = model.lineWidth + x2 - x1;\n        newLineWidth = newLineWidth < 1 ? 1 : newLineWidth;\n\n        // dragging updates the `lineWidth` model property,\n        // which is visible to other visualizations in the chiasm.\n        model.lineWidth = newLineWidth;\n        x1 = x2;\n      });\n    }());\n\n    // Update the color and text based on the model.\n    model.when(\"color\", (color) => rect.attr(\"fill\", color) );\n\n    // Update the text based on the model.\n    model.when(\"text\", text.text, text);\n\n    // When the size of the visualization is set\n    // by the chiasm layout engine,\n    // TODO refactor Chiasm layout plugin to use containerWidth and containerHeight\n    // rather than box, so width and height changes can be handled independently.\n    model.when(\"box\", function (box) {\n\n      // Set the CSS `left` and `top` properties to move the\n      // SVG to `(box.x, box.y)` relative to its container.\n      svg\n        .style(\"left\", box.x + \"px\")\n        .style(\"top\", box.y + \"px\");\n\n      // Set the size of the SVG and background rect.\n      svg\n        .attr(\"width\", box.width)\n        .attr(\"height\", box.height);\n\n      rect\n        .attr(\"width\", box.width)\n        .attr(\"height\", box.height);\n\n      // Update the text label to be centered.\n      text\n        .attr(\"x\", box.width / 2)\n        .attr(\"y\", box.height / 2);\n\n    });\n\n    // Update the X lines whenever either\n    // the `box` or `lineWidth` model properties change.\n    model.when([\"box\", \"lineWidth\"], function (box, lineWidth) {\n      var w = box.width,\n      h = box.height,\n      lines = svg.selectAll(\"line\").data([\n        {x1: 0, y1: 0, x2: w, y2: h},\n        {x1: 0, y1: h, x2: w, y2: 0}\n      ]);\n      lines.enter().append(\"line\");\n      lines\n        .attr(\"x1\", function (d) { return d.x1; })\n        .attr(\"y1\", function (d) { return d.y1; })\n        .attr(\"x2\", function (d) { return d.x2; })\n        .attr(\"y2\", function (d) { return d.y2; })\n        .style(\"stroke-width\", lineWidth)\n        .style(\"stroke-opacity\", 0.2)\n        .style(\"stroke\", \"black\")\n        .call(lineDrag);\n    });\n\n    // Clean up the DOM elements when the component is destroyed.\n    model.destroy = function(){\n      chiasm.container.removeChild(svg.node());\n    };\n\n  }\n}\n"]}